<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- Ensures mobile-friendly scaling -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OPRA Study Quiz</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      max-width: 600px;
      font-size: 18px;
      line-height: 1.5;
    }
    h1, h2 {
      text-align: center;
    }
    /* Intro screen styling */
    #intro-screen {
      margin-top: 50px;
    }
    #intro-screen p {
      margin-bottom: 20px;
    }
    #start-btn {
      display: block;
      margin: 0 auto;
      padding: 12px 20px;
      font-size: 18px;
      cursor: pointer;
      border: 1px solid #333;
      border-radius: 4px;
      background-color: #f5f5f5;
    }
    /* Quiz container styling */
    #quiz-container {
      display: none; /* hidden by default, shown after clicking Start Quiz */
    }
    .question {
      font-weight: bold;
      margin-bottom: 1em;
    }
    .answers button {
      display: block;
      width: 100%;
      margin: 0.5em 0;
      padding: 12px;
      font-size: 16px;
      border: 1px solid #ccc;
      background: #f5f5f5;
      cursor: pointer;
      text-align: left;
      border-radius: 4px;
    }
    .feedback {
      margin-top: 1em;
      font-weight: bold;
    }
    .hidden {
      display: none;
    }
    .score {
      margin-top: 2em;
      text-align: center;
      font-weight: bold;
      font-size: 20px;
    }
    .explanation {
      margin-top: 10px;
      font-weight: normal;
    }
    .next-btn {
      display: inline-block;
      margin-top: 15px;
      padding: 10px 16px;
      font-size: 16px;
      cursor: pointer;
      border: 1px solid #333;
      border-radius: 4px;
      background-color: #eee;
    }
  </style>
</head>
<body>

<!-- Intro Screen -->
<div id="intro-screen">
  <h1>Welcome to the OPRA Study Quiz</h1>
  <p>
    This quiz is based on the OPRA (Organ Preservation in Rectal Adenocarcinoma) study.
    It contains 10 questions, each with five multiple-choice answers. 
  </p>
  <p>
    After you choose an answer, you'll be told if you're correct or incorrect and given a brief explanation.
    At the end, you'll see your total score out of 10.
  </p>
  <button id="start-btn" onclick="startQuiz()">Start Quiz</button>
</div>

<!-- Quiz Container -->
<div id="quiz-container">
  <div id="quiz-content"></div>
</div>

<script>
/* 
  Each question object has:
    - question: The question text
    - answers: An array of five possible answers
    - correct: Index (0 to 4) of the correct answer
    - explanation: A short paragraph explaining why that is correct
*/
const questions = [
  {
    question: "1. What was the primary goal of the OPRA study?",
    answers: [
      "Compare short-course and long-course radiotherapy for rectal cancer",
      "Evaluate organ preservation rates and outcomes after total neoadjuvant therapy",
      "Compare different surgical anastomotic techniques in low rectal cancer",
      "Determine cost-effectiveness of robotic vs. open rectal cancer surgery",
      "No specific goal was defined"
    ],
    correct: 1,
    explanation: "The OPRA study primarily investigated organ preservation and oncological outcomes using total neoadjuvant therapy (TNT) and a watch-and-wait approach."
  },
  {
    question: "2. Which patient population was primarily enrolled in the OPRA study?",
    answers: [
      "Early-stage rectal cancer (T1–T2, N0)",
      "Metastatic rectal cancer (Stage IV)",
      "Locally advanced rectal cancer (T3–T4 or N+)",
      "Rectal cancer unsuitable for neoadjuvant treatments",
      "Patients with complete clinical response only"
    ],
    correct: 2,
    explanation: "OPRA focused on locally advanced rectal cancer (clinical T3–T4 or N+), where total neoadjuvant therapy was most relevant."
  },
  {
    question: "3. What was the main difference between the two TNT approaches in OPRA?",
    answers: [
      "Use of immunotherapy in one arm only",
      "Timing of chemotherapy (induction vs. consolidation)",
      "Addition of targeted therapies in the consolidation arm only",
      "Variation in total radiation dose",
      "No difference at all"
    ],
    correct: 1,
    explanation: "The trial compared induction chemotherapy followed by chemoradiotherapy versus chemoradiotherapy followed by consolidation chemotherapy."
  },
  {
    question: "4. In the OPRA study, what did achieving a complete clinical response (cCR) signify?",
    answers: [
      "Non-surgical management (watch-and-wait) could be offered",
      "Immediate surgical resection was mandated",
      "Exclusion from further follow-up in the study",
      "Mandatory colostomy formation",
      "Not applicable; cCR was not evaluated"
    ],
    correct: 0,
    explanation: "Patients with a clinical complete response were offered a watch-and-wait approach instead of immediate surgery."
  },
  {
    question: "5. How long was the typical observation period before deciding on surgery or continued watch-and-wait?",
    answers: [
      "2 weeks",
      "8-12 weeks",
      "6 months",
      "18 months",
      "No observation period was used"
    ],
    correct: 1,
    explanation: "Typically, OPRA used an 8- to 12-week interval after completing TNT to assess response and decide on watch-and-wait vs surgery."
  },
  {
    question: "6. Which best describes the main oncological outcome for watch-and-wait?",
    answers: [
      "Time to permanent stoma creation",
      "Disease-free survival and local regrowth rates",
      "Quality of life with a temporary stoma",
      "Rate of immediate postoperative complications",
      "Age-related comorbidity incidence"
    ],
    correct: 1,
    explanation: "Key outcomes included disease-free survival (DFS) and the rate of local regrowth for patients in a watch-and-wait pathway."
  },
  {
    question: "7. If local regrowth was detected in watch-and-wait, what was recommended?",
    answers: [
      "Continue observation only",
      "Start a new course of chemotherapy",
      "Proceed with salvage surgical resection if feasible",
      "Switch to palliative care",
      "Offer re-irradiation alone"
    ],
    correct: 2,
    explanation: "The study protocol recommended prompt salvage surgery for any local regrowth detected during close surveillance."
  },
  {
    question: "8. Key finding regarding organ preservation in OPRA?",
    answers: [
      "No difference between induction and consolidation arms",
      "Significant organ preservation in TNT arms, especially consolidation",
      "All patients eventually required surgery",
      "Only patients with positive CRM were eligible",
      "Organ preservation was not an endpoint"
    ],
    correct: 1,
    explanation: "A substantial proportion achieved organ preservation, particularly in the consolidation chemotherapy arm."
  },
  {
    question: "9. Regarding survival outcomes, what is most accurate?",
    answers: [
      "Watch-and-wait had significantly worse overall survival",
      "Most local regrowth quickly led to metastatic disease",
      "Watch-and-wait had comparable DFS to surgery, with rigorous surveillance",
      "Only local recurrence was measured, not survival",
      "All patients in the watch-and-wait group relapsed"
    ],
    correct: 2,
    explanation: "Under strict follow-up and salvage protocols, survival outcomes remained comparable to those undergoing immediate surgery."
  },
  {
    question: "10. How does OPRA inform future practice?",
    answers: [
      "Automatic watch-and-wait for all rectal cancer",
      "Importance of careful selection and strict surveillance for non-operative management",
      "Discourages the use of neoadjuvant therapy",
      "Immediate surgery is mandatory to avoid regrowth",
      "It concluded that no further trials are required"
    ],
    correct: 1,
    explanation: "The study highlights the viability of organ preservation for properly selected patients, with close monitoring and salvage surgery when needed."
  }
];

let currentQuestionIndex = 0;
let score = 0;
let hasAnswered = false; // track if user has selected an answer

function startQuiz() {
  // Hide intro screen, show quiz container
  document.getElementById('intro-screen').style.display = 'none';
  document.getElementById('quiz-container').style.display = 'block';
  renderQuestion();
}

// Render the current question & answers
function renderQuestion() {
  const quizContent = document.getElementById('quiz-content');

  // If we've gone through all questions, show final score
  if (currentQuestionIndex >= questions.length) {
    quizContent.innerHTML = `
      <div class="score">
        You scored ${score} out of ${questions.length}!
      </div>
    `;
    return;
  }

  // Build the current question
  const q = questions[currentQuestionIndex];
  const answersHtml = q.answers.map((answer, index) => {
    return `<button onclick="checkAnswer(${index})">${answer}</button>`;
  }).join('');

  quizContent.innerHTML = `
    <div class="question">${q.question}</div>
    <div class="answers">${answersHtml}</div>
    <div id="feedback" class="feedback hidden"></div>
  `;
  hasAnswered = false;
}

function checkAnswer(selectedIndex) {
  if (hasAnswered) return; // prevent multiple clicks
  hasAnswered = true;

  const q = questions[currentQuestionIndex];
  const feedbackEl = document.getElementById('feedback');

  // Mark correct or incorrect
  if (selectedIndex === q.correct) {
    score++;
    feedbackEl.innerHTML = `<span style="color: green;">Correct!</span>`;
  } else {
    feedbackEl.innerHTML = `<span style="color: red;">Incorrect!</span>`;
  }

  // Show the explanation
  feedbackEl.innerHTML += `
    <div class="explanation">${q.explanation}</div>
    <button class="next-btn" onclick="nextQuestion()">Next Question</button>
  `;
  
  feedbackEl.classList.remove('hidden');
}

function nextQuestion() {
  currentQuestionIndex++;
  renderQuestion();
}
</script>

</body>
</html>
