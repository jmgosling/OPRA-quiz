<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- Ensure the page scales properly on mobile devices -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OPRA Study Quiz</title>
  <style>
    /* Larger, more readable fonts for mobile */
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      max-width: 600px;
      font-size: 18px; /* Increase overall text size */
      line-height: 1.5;
    }
    h1 {
      text-align: center;
      font-size: 24px;
      margin-bottom: 20px;
    }
    .question {
      margin-bottom: 1em;
      font-weight: bold;
    }
    .answers button {
      display: block;
      width: 100%;
      margin: 0.5em 0;
      padding: 12px;
      font-size: 16px;
      border: 1px solid #ccc;
      background: #f5f5f5;
      cursor: pointer;
      text-align: left;
      border-radius: 4px;
    }
    .feedback {
      font-weight: bold;
      margin-top: 1em;
    }
    .hidden {
      display: none;
    }
    .score {
      margin-top: 2em;
      text-align: center;
      font-weight: bold;
      font-size: 20px;
    }
  </style>
</head>
<body>

<h1>OPRA Study Quiz</h1>

<div id="quiz-container"></div>

<script>
// Example quiz data with 5 options each.
// 'correct' is the zero-based index of the right answer.
const questions = [
  {
    question: "1. What was the primary goal of the OPRA study?",
    answers: [
      "Compare short-course and long-course radiotherapy for rectal cancer",
      "Evaluate organ preservation rates and outcomes after total neoadjuvant therapy",
      "Compare different surgical anastomotic techniques in low rectal cancer",
      "Determine cost-effectiveness of robotic vs. open rectal cancer surgery",
      "None of the above"  // 5th option
    ],
    correct: 1
  },
  {
    question: "2. Which patient population was primarily enrolled in the OPRA study?",
    answers: [
      "Early-stage rectal cancer (T1–T2, N0)",
      "Metastatic rectal cancer (Stage IV)",
      "Locally advanced rectal cancer (T3–T4 or N+)",
      "Rectal cancer unsuitable for neoadjuvant treatments",
      "All of the above"
    ],
    correct: 2
  },
  {
    question: "3. What was the main difference between the two TNT approaches?",
    answers: [
      "Use of immunotherapy in one arm only",
      "Timing of chemotherapy (induction vs. consolidation)",
      "Addition of targeted therapies in the consolidation arm only",
      "Variation in total radiation dose",
      "No significant difference at all"
    ],
    correct: 1
  },
  {
    question: "4. In the OPRA study, what did achieving a complete clinical response (cCR) signify?",
    answers: [
      "Non-surgical management (watch-and-wait) could be offered",
      "Immediate surgical resection to confirm pathological complete response",
      "Exclusion from further follow-up in the study",
      "Early colostomy formation to prevent recurrence",
      "Continuation of chemotherapy indefinitely"
    ],
    correct: 0
  },
  {
    question: "5. How long was the typical observation period before deciding on surgery or continued watch-and-wait?",
    answers: [
      "2 weeks",
      "8-12 weeks",
      "6 months",
      "18 months",
      "No standard observation period was used"
    ],
    correct: 1
  },
  {
    question: "6. Which best describes the main oncological outcome for watch-and-wait?",
    answers: [
      "Time to permanent stoma creation",
      "Disease-free survival and local regrowth rates",
      "Quality of life with temporary stoma",
      "Rate of immediate postoperative complications",
      "Patient satisfaction scores"
    ],
    correct: 1
  },
  {
    question: "7. If local regrowth was detected in watch-and-wait, what was recommended?",
    answers: [
      "Continue observation only",
      "Start a new course of chemotherapy",
      "Proceed with salvage surgical resection if feasible",
      "Switch to palliative care",
      "High-dose short-course radiotherapy again"
    ],
    correct: 2
  },
  {
    question: "8. Key finding regarding organ preservation in OPRA?",
    answers: [
      "No difference between induction and consolidation arms",
      "Significant organ preservation in TNT arms, especially consolidation",
      "All patients required surgery eventually",
      "Only patients with positive CRM were eligible",
      "It was safe only in a small subset of patients"
    ],
    correct: 1
  },
  {
    question: "9. Regarding survival outcomes, what is most accurate?",
    answers: [
      "Watch-and-wait had significantly worse overall survival",
      "Most local regrowth quickly led to metastatic disease",
      "Watch-and-wait had comparable disease-free survival (with close surveillance)",
      "Only local recurrence was measured, not survival",
      "Both disease-free survival and overall survival were drastically reduced"
    ],
    correct: 2
  },
  {
    question: "10. How does OPRA inform future practice?",
    answers: [
      "Automatic watch-and-wait for all rectal cancer",
      "Importance of careful selection and strict surveillance for non-operative management",
      "Discourages any neoadjuvant therapy",
      "Immediate surgery to avoid regrowth",
      "No further research needed"
    ],
    correct: 1
  }
];

let currentQuestion = 0;
let score = 0;

// Render the current question & answers
function renderQuestion() {
  const quizContainer = document.getElementById('quiz-container');

  // If we've gone through all questions, show final score
  if (currentQuestion >= questions.length) {
    quizContainer.innerHTML = `
      <div class="score">
        You scored ${score} out of ${questions.length}!
      </div>
    `;
    return;
  }

  // Otherwise, build the current question
  const q = questions[currentQuestion];
  const answersHtml = q.answers.map((answer, index) => {
    return `<button onclick="checkAnswer(${index})">${answer}</button>`;
  }).join('');

  quizContainer.innerHTML = `
    <div class="question">${q.question}</div>
    <div class="answers">${answersHtml}</div>
    <div id="feedback" class="feedback hidden"></div>
  `;
}

// Check the user's selected answer
function checkAnswer(selectedIndex) {
  const q = questions[currentQuestion];
  const feedbackEl = document.getElementById('feedback');

  if (selectedIndex === q.correct) {
    score++;
    feedbackEl.textContent = "Correct!";
    feedbackEl.style.color = "green";
  } else {
    feedbackEl.textContent = "Incorrect!";
    feedbackEl.style.color = "red";
  }

  feedbackEl.classList.remove("hidden");

  // Brief pause so user can see feedback, then load the next question
  setTimeout(() => {
    currentQuestion++;
    renderQuestion();
  }, 1000);
}

// Initialize the quiz on page load
renderQuestion();
</script>

</body>
</html>
