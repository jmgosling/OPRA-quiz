<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- Mobile-friendly scaling -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OPRA Study Quiz</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      max-width: 600px;
      font-size: 18px;
      line-height: 1.5;
    }
    h1, h2 {
      text-align: center;
    }
    /* Intro screen styling */
    #intro-screen {
      margin-top: 50px;
    }
    #intro-screen p {
      margin-bottom: 20px;
    }
    #start-btn {
      display: block;
      margin: 0 auto;
      padding: 12px 20px;
      font-size: 18px;
      cursor: pointer;
      border: 1px solid #333;
      border-radius: 4px;
      background-color: #f5f5f5;
    }
    /* Quiz container hidden by default */
    #quiz-container {
      display: none;
    }
    .question {
      font-weight: bold;
      margin-bottom: 1em;
    }
    .answers button {
      display: block;
      width: 100%;
      margin: 0.5em 0;
      padding: 12px;
      font-size: 16px;
      border: 1px solid #ccc;
      background: #f5f5f5;
      cursor: pointer;
      text-align: left;
      border-radius: 4px;
    }
    .feedback {
      margin-top: 1em;
      font-weight: bold;
    }
    .explanation {
      margin-top: 10px;
      font-weight: normal;
    }
    .hidden {
      display: none;
    }
    .score {
      margin-top: 2em;
      text-align: center;
      font-weight: bold;
      font-size: 20px;
    }
    .next-btn {
      display: inline-block;
      margin-top: 15px;
      padding: 10px 16px;
      font-size: 16px;
      cursor: pointer;
      border: 1px solid #333;
      border-radius: 4px;
      background-color: #eee;
    }
  </style>
</head>
<body>

<!-- Intro Screen -->
<div id="intro-screen">
  <h1>Welcome to the OPRA Study Quiz</h1>
  <p>
    This quiz is based on the OPRA (Organ Preservation in Rectal Adenocarcinoma) study (J Clin Oncol 2022;40:2546-2556). 
    It contains 10 questions, each with five multiple-choice answers.
  </p>
  <p>
    The OPRA trial investigated total neoadjuvant therapy (TNT) for locally advanced rectal cancer (stage II/III), comparing 
    induction versus consolidation chemotherapy, followed by either surgery or a watch-and-wait approach if a complete or near-complete 
    clinical response was achieved.
  </p>
  <button id="start-btn" onclick="startQuiz()">Start Quiz</button>
</div>

<!-- Quiz Container -->
<div id="quiz-container">
  <div id="quiz-content"></div>
</div>

<script>
// Each question object has:
// - question: The question text
// - answers: 5 possible answer choices
// - correct: The index (0..4) of the correct answer
// - explanation: A short paragraph explaining why that choice is correct

const questions = [
  {
    question: "1. What was the PRIMARY endpoint of the OPRA trial?",
    answers: [
      "TME-free survival (organ preservation rate)",
      "Overall survival (OS)",
      "Local regrowth rate",
      "Disease-free survival (DFS)",
      "Pathologic complete response (pCR) rate"
    ],
    correct: 3, // Zero-based index => 3 = DFS
    explanation: "Although organ preservation was a major focus, the trial was officially designed with DFS as the primary endpoint, comparing results to historical data. TME-free survival (organ preservation) was a secondary endpoint."
  },
  {
    question: "2. Which patient population was primarily enrolled in the OPRA study?",
    answers: [
      "Early-stage rectal cancer (T1–T2, N0) only",
      "Metastatic rectal cancer (Stage IV)",
      "Locally advanced rectal cancer (Stage II/III: T3–T4 or N+)",
      "Rectal cancer unsuitable for any neoadjuvant treatments",
      "Patients with confirmed distant metastases"
    ],
    correct: 2,
    explanation: "OPRA enrolled patients with stage II or III rectal adenocarcinoma, clinically T3–T4 or node-positive, to evaluate TNT and a selective watch-and-wait approach."
  },
  {
    question: "3. What was the main distinction between the two TNT schedules (induction vs consolidation) in OPRA?",
    answers: [
      "Use of immunotherapy in the induction arm only",
      "Sequence of systemic chemotherapy in relation to chemoradiotherapy (before vs after)",
      "Variation in total radiotherapy dose",
      "Only the consolidation arm included targeted biologics",
      "No significant difference between the two arms"
    ],
    correct: 1,
    explanation: "The OPRA study compared delivering systemic chemotherapy before chemoradiotherapy (induction) versus after chemoradiotherapy (consolidation)."
  },
  {
    question: "4. What did achieving a complete clinical response (cCR) permit within the OPRA trial design?",
    answers: [
      "Immediate total mesorectal excision (TME)",
      "A watch-and-wait approach (nonoperative management) with close surveillance",
      "Mandatory abdominoperineal resection to confirm pathological response",
      "Permanent stoma to avoid local recurrence",
      "Exclusion from further follow-up"
    ],
    correct: 1,
    explanation: "Patients with a cCR (or near-cCR) were offered a watch-and-wait strategy (close monitoring) instead of immediate surgery."
  },
  {
    question: "5. How long after completing neoadjuvant therapy (TNT) were patients typically observed before deciding on surgery or continuing watch-and-wait?",
    answers: [
      "2 weeks",
      "8–12 weeks",
      "6 months",
      "2 years",
      "No observation was used"
    ],
    correct: 1,
    explanation: "In OPRA, restaging typically occurred around 8 weeks (±4) after completion of TNT to assess tumor response and decide on TME or watch-and-wait."
  },
  {
    question: "6. Which best describes the main oncological outcomes tracked for watch-and-wait patients in OPRA?",
    answers: [
      "Immediate colostomy formation rates",
      "Permanent stoma incidence",
      "Disease-free survival (DFS) and local regrowth rates",
      "Time to sexual dysfunction",
      "Cost-effectiveness of nonoperative management"
    ],
    correct: 2,
    explanation: "Primary endpoints included DFS overall, but local regrowth rates were a crucial outcome for those managed without surgery (watch-and-wait)."
  },
  {
    question: "7. In the OPRA study, what was recommended if a watch-and-wait patient developed local regrowth?",
    answers: [
      "Continue observation until symptoms worsen",
      "Start another course of chemotherapy without surgery",
      "Perform salvage surgical resection (TME) if feasible",
      "Offer best supportive (palliative) care only",
      "Immediate re-irradiation"
    ],
    correct: 2,
    explanation: "Patients with local regrowth under watch-and-wait were advised to undergo prompt salvage resection if technically feasible."
  },
  {
    question: "8. Which statement best reflects OPRA’s key finding on organ preservation?",
    answers: [
      "Organ preservation was not feasible for any rectal cancer patient",
      "All patients ultimately required standard surgery within 2 years",
      "A significant proportion achieved organ preservation, especially in the consolidation chemotherapy arm",
      "Organ preservation only benefited those with T4 tumors",
      "Organ preservation led to drastically worse survival outcomes"
    ],
    correct: 2,
    explanation: "About half of the patients, especially those in the consolidation arm, were able to avoid TME (with watch-and-wait), showing that organ preservation is achievable without an apparent survival detriment."
  },
  {
    question: "9. Regarding survival in OPRA, which statement is most accurate?",
    answers: [
      "Watch-and-wait resulted in significantly worse overall survival than immediate surgery",
      "All local regrowth cases rapidly progressed to distant metastases",
      "Patients managed with close surveillance had DFS rates comparable to those undergoing immediate TME",
      "Only local recurrence was measured, not disease-free survival",
      "Long-term follow-up revealed no salvages after regrowth"
    ],
    correct: 2,
    explanation: "OPRA found no apparent survival detriment in patients who entered watch-and-wait with a cCR, provided they had strict surveillance and prompt salvage surgery if regrowth occurred."
  },
  {
    question: "10. How might a colorectal surgeon apply OPRA’s findings to future practice?",
    answers: [
      "Adopt an automatic watch-and-wait policy for all rectal cancer patients regardless of stage",
      "Select and closely monitor suitable patients for nonoperative management if they achieve a complete response to TNT",
      "Eliminate neoadjuvant chemotherapy/radiotherapy in rectal cancer protocols",
      "Always proceed to total mesorectal excision to avoid any risk of regrowth",
      "Use short-course radiotherapy plus surgery in all cases"
    ],
    correct: 1,
    explanation: "The OPRA trial underscores the value of TNT plus a watch-and-wait strategy for clinically complete responders, but emphasizes patient selection and vigilant follow-up to ensure safe organ preservation."
  }
];

let currentQuestionIndex = 0;
let score = 0;
let hasAnswered = false;

// Start Quiz: hide intro, show quiz container, render first Q
function startQuiz() {
  document.getElementById('intro-screen').style.display = 'none';
  document.getElementById('quiz-container').style.display = 'block';
  renderQuestion();
}

function renderQuestion() {
  const quizContent = document.getElementById('quiz-content');

  // If we've gone through all 10 questions, show final score
  if (currentQuestionIndex >= questions.length) {
    quizContent.innerHTML = `
      <div class="score">
        You scored ${score} out of ${questions.length}!
      </div>
    `;
    return;
  }

  const q = questions[currentQuestionIndex];
  // Build the answer buttons
  const answersHtml = q.answers.map((answer, i) => {
    return `<button onclick="checkAnswer(${i})">${answer}</button>`;
  }).join('');

  quizContent.innerHTML = `
    <div class="question">${q.question}</div>
    <div class="answers">${answersHtml}</div>
    <div id="feedback" class="feedback hidden"></div>
  `;
  hasAnswered = false;
}

function checkAnswer(selectedIndex) {
  if (hasAnswered) return; // prevent multiple clicks
  hasAnswered = true;

  const q = questions[currentQuestionIndex];
  const feedbackEl = document.getElementById('feedback');

  if (selectedIndex === q.correct) {
    score++;
    feedbackEl.innerHTML = `<span style="color: green;">Correct!</span>`;
  } else {
    feedbackEl.innerHTML = `<span style="color: red;">Incorrect!</span>`;
  }

  // Explanation plus Next button
  feedbackEl.innerHTML += `
    <div class="explanation">${q.explanation}</div>
    <button class="next-btn" onclick="nextQuestion()">Next Question</button>
  `;
  feedbackEl.classList.remove('hidden');
}

function nextQuestion() {
  currentQuestionIndex++;
  renderQuestion();
}
</script>

</body>
</html>
