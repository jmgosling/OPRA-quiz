<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- Ensure proper scaling on mobile -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OPRA & RAPIDO Study Quizzes</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      max-width: 600px;
      font-size: 18px;
      line-height: 1.5;
    }
    h1, h2 {
      text-align: center;
    }
    /* Landing Page style */
    #landing-page {
      margin-top: 50px;
      text-align: center;
    }
    .quiz-btn {
      display: inline-block;
      margin: 15px;
      padding: 15px 25px;
      font-size: 18px;
      cursor: pointer;
      border: 1px solid #333;
      border-radius: 4px;
      background-color: #f5f5f5;
    }
    /* Quiz container hidden by default */
    #quiz-container {
      display: none;
    }
    .question {
      font-weight: bold;
      margin-bottom: 1em;
    }
    .answers button {
      display: block;
      width: 100%;
      margin: 0.5em 0;
      padding: 12px;
      font-size: 16px;
      border: 1px solid #ccc;
      background: #f5f5f5;
      cursor: pointer;
      text-align: left;
      border-radius: 4px;
    }
    .feedback {
      margin-top: 1em;
      font-weight: bold;
    }
    .explanation {
      margin-top: 10px;
      font-weight: normal;
    }
    .next-btn {
      display: inline-block;
      margin-top: 15px;
      padding: 10px 16px;
      font-size: 16px;
      cursor: pointer;
      border: 1px solid #333;
      border-radius: 4px;
      background-color: #eee;
    }
    .hidden {
      display: none;
    }
    .score {
      margin-top: 2em;
      text-align: center;
      font-weight: bold;
      font-size: 20px;
    }
  </style>
</head>

<body>
  <!-- Landing Page -->
  <div id="landing-page">
    <h1>Select a Quiz</h1>
    <p>Choose one of the following study quizzes:</p>
    <button class="quiz-btn" onclick="startOPRA()">OPRA Study Quiz</button>
    <button class="quiz-btn" onclick="startRAPIDO()">RAPIDO Study Quiz</button>
  </div>

  <!-- Quiz Container -->
  <div id="quiz-container">
    <h2 id="quiz-title"></h2>
    <div id="quiz-content"></div>
  </div>

<script>
// ==================== OPRA QUESTIONS ====================
const opraQuestions = [
  {
    question: "1. What was the PRIMARY endpoint of the OPRA trial?",
    answers: [
      "TME-free survival (organ preservation)",
      "Overall survival (OS)",
      "Local regrowth rate",
      "Disease-free survival (DFS)",
      "Pathologic complete response (pCR)"
    ],
    correct: 3,
    explanation: "OPRA officially designated DFS as the primary endpoint. Organ preservation was a secondary outcome."
  },
  {
    question: "2. Which patients did OPRA recruit?",
    answers: [
      "Early-stage rectal cancer only",
      "Metastatic rectal cancer (stage IV)",
      "Locally advanced rectal cancer (stage II/III)",
      "Rectal cancer with no margin involvement",
      "Patients with complete clinical response at baseline"
    ],
    correct: 2,
    explanation: "OPRA enrolled stage II or III rectal adenocarcinoma for evaluating total neoadjuvant therapy (TNT) plus watch-and-wait in cCR cases."
  },
  {
    question: "3. What was the main difference between induction vs consolidation TNT arms in OPRA?",
    answers: [
      "One arm had immunotherapy only",
      "Timing of chemotherapy relative to chemoradiation (before vs after)",
      "Variation in total radiotherapy dose",
      "One arm used advanced targeted agents",
      "No difference was studied"
    ],
    correct: 1,
    explanation: "Patients were randomized to induction chemo → chemoradiotherapy or chemoradiotherapy → consolidation chemo."
  },
  {
    question: "4. What happened if a patient in OPRA achieved a complete clinical response (cCR)?",
    answers: [
      "Immediate surgery was mandatory",
      "Nonoperative management (watch-and-wait) with close follow-up",
      "Permanent stoma to prevent recurrence",
      "Excluded from any further treatments",
      "Routine extended resections"
    ],
    correct: 1,
    explanation: "Patients with cCR or near-cCR were placed on a strict watch-and-wait approach instead of immediate TME."
  },
  {
    question: "5. How long after TNT completion did OPRA typically wait before deciding on surgery vs continued watch-and-wait?",
    answers: [
      "2 weeks",
      "8-12 weeks",
      "6 months",
      "No set interval was used",
      "24 weeks"
    ],
    correct: 1,
    explanation: "OPRA generally restaged around 8-12 weeks post-TNT to decide if the patient needed TME or could continue watch-and-wait."
  },
  {
    question: "6. Which key oncological outcomes did OPRA track for watch-and-wait patients?",
    answers: [
      "Permanent stoma formation rate",
      "Local regrowth rates and disease-free survival",
      "Overall stoma-free survival only",
      "Cost-effectiveness of the watch-and-wait approach",
      "Time to sexual dysfunction"
    ],
    correct: 1,
    explanation: "Local regrowth (especially after cCR) and DFS were central metrics for those managed nonoperatively."
  },
  {
    question: "7. What was the recommended action if local regrowth was detected under watch-and-wait in OPRA?",
    answers: [
      "Continue observation until symptomatic",
      "Second full course of TNT only",
      "Immediate salvage surgical resection if technically feasible",
      "Palliative care exclusively",
      "End the study protocol"
    ],
    correct: 2,
    explanation: "OPRA recommended prompt salvage TME if local regrowth occurred."
  },
  {
    question: "8. OPRA’s key finding about organ preservation was what?",
    answers: [
      "Nearly all patients ultimately required surgery",
      "Organ preservation success was low in both arms",
      "A large proportion of patients achieved organ preservation, especially in consolidation chemo arm",
      "Only T4 tumors were organ-preserved",
      "Organ preservation always led to inferior survival"
    ],
    correct: 2,
    explanation: "Organ preservation was achieved in almost half the cohort, particularly with consolidation chemo, with no major survival penalty."
  },
  {
    question: "9. Regarding survival in OPRA, which statement is correct?",
    answers: [
      "Watch-and-wait drastically worsened overall survival",
      "Local regrowth always spread systemically",
      "Watch-and-wait had similar DFS to standard TME under close monitoring",
      "They did not measure DFS or OS in OPRA",
      "All watch-and-wait patients died by 3 years"
    ],
    correct: 2,
    explanation: "Close surveillance and salvage resection helped watch-and-wait patients maintain comparable DFS to immediate TME."
  },
  {
    question: "10. How can a colorectal surgeon use OPRA’s findings in practice?",
    answers: [
      "Offer a universal watch-and-wait policy to all rectal cancers",
      "Stop using TNT or radiotherapy entirely",
      "Select patients with cCR for strict nonoperative management with salvage if needed",
      "Always do TME to avoid any risk of regrowth",
      "Use short-course RT for all patients"
    ],
    correct: 2,
    explanation: "OPRA supports a watch-and-wait strategy for carefully selected rectal cancer patients with cCR, with close follow-up."
  }
];

// ==================== RAPIDO QUESTIONS ====================
/* 
  Source: Dijkstra et al. Ann Surg 2023;278:e766–e772
  Key Points:
    - Compares short-course RT + chemo (TNT) vs standard long-course chemoradiotherapy
    - At 5 years, better systemic control (fewer distant mets) with TNT, but slightly higher local recurrence
    - No difference in overall survival
*/

const rapidoQuestions = [
  {
    question: "1. What was the main goal of the RAPIDO trial?",
    answers: [
      "Compare watch-and-wait vs total mesorectal excision in rectal cancer",
      "Reduce disease-related treatment failure (DrTF) with short-course RT and chemo (TNT)",
      "Assess immunotherapy alone in rectal cancer",
      "Compare robotic vs laparoscopic TME",
      "Analyze long-term stoma rates only"
    ],
    correct: 1,
    explanation: "RAPIDO aimed to lower DrTF by using short-course radiotherapy followed by systemic chemotherapy before TME in high-risk rectal cancer."
  },
  {
    question: "2. Which two approaches did RAPIDO compare?",
    answers: [
      "Immediate surgery vs palliative care",
      "Short-course RT + chemo (TNT) vs standard long-course chemoradiotherapy (with optional postop chemo)",
      "Long-course RT + watch-and-wait only",
      "Proton therapy vs photon therapy",
      "Chemotherapy alone vs TME alone"
    ],
    correct: 1,
    explanation: "RAPIDO compared short-course RT plus chemo (a TNT approach) versus conventional long-course chemoradiotherapy ± optional adjuvant chemotherapy."
  },
  {
    question: "3. What specific patient population was RAPIDO designed for?",
    answers: [
      "Only T1 rectal tumors",
      "Stage IV rectal cancer with liver mets",
      "High-risk locally advanced rectal cancer (e.g., T4, N2, EMVI+, threatened margins)",
      "Rectal cancer with negative margins only",
      "Metastatic colon cancer"
    ],
    correct: 2,
    explanation: "RAPIDO focused on locally advanced rectal cancers with high-risk features per MRI."
  },
  {
    question: "4. After 5 years, which outcome was significantly improved in the TNT (short-course RT + chemo) arm?",
    answers: [
      "Local recurrence was much lower",
      "Disease-related treatment failure (DrTF) and distant metastases were reduced",
      "Overall survival doubled",
      "No improvement was found",
      "Pathologic complete response was zero"
    ],
    correct: 1,
    explanation: "The TNT approach lowered disease-related treatment failure and distant metastases at 5 years, even though local recurrence was modestly higher."
  },
  {
    question: "5. What happened to locoregional failure (LRF) at 5 years in the short-course RT + chemo group compared to standard?",
    answers: [
      "LRF was significantly lower",
      "LRF was the same in both arms",
      "Slightly higher LRF in the TNT group",
      "Nearly 100% local control in TNT",
      "Both arms had zero local recurrences"
    ],
    correct: 2,
    explanation: "Although the TNT approach improved systemic control, it led to a small but notable increase in local recurrence at 5 years."
  },
  {
    question: "6. Which factor contributed to the higher local recurrence in the TNT arm?",
    answers: [
      "Excessive immunotherapy use",
      "Major reduction in TME surgeries",
      "Higher incidence of mesorectal breach and some older 3D-CRT techniques",
      "Inadequate follow-up protocols",
      "Massive variation in RT dose"
    ],
    correct: 2,
    explanation: "Data showed more mesorectal breaches and possible geometric misses with older 3D-CRT in the TNT group, raising local recurrence."
  },
  {
    question: "7. In RAPIDO, what is an 'early locoregional failure (eLRF)'?",
    answers: [
      "LRF after R0 resection and 2 years of follow-up",
      "Regrowth in a watch-and-wait scenario",
      "No resection or an R2 resection in poor responders (often with distant mets)",
      "LRF discovered after 5 years post-TNT",
      "A trivial data point in the trial"
    ],
    correct: 2,
    explanation: "eLRF was defined as no (or R2) resection because the tumor was deemed unresectable or widely progressed before definitive surgery."
  },
  {
    question: "8. Which composite endpoint captured local and systemic progressions in RAPIDO?",
    answers: [
      "Overall stoma rate (OSR)",
      "Disease-related treatment failure (DrTF)",
      "Patient-reported QoL",
      "Pathologic complete response (pCR)",
      "Time to local re-growth"
    ],
    correct: 1,
    explanation: "The trial's primary endpoint was disease-related treatment failure, combining locoregional failure, distant mets, and new primaries or death."
  },
  {
    question: "9. At 5 years, how did overall survival (OS) compare between TNT and standard therapy in RAPIDO?",
    answers: [
      "TNT had significantly worse OS",
      "TNT significantly boosted OS",
      "No significant difference in OS",
      "OS was near 100% in both arms",
      "OS was unmeasured in the trial"
    ],
    correct: 2,
    explanation: "Despite improved distant control and a small rise in LRF, OS did not differ significantly between short-course TNT and standard therapy."
  },
  {
    question: "10. What key lesson can be drawn from RAPIDO for future rectal cancer management?",
    answers: [
      "Short-course RT + chemo improves systemic outcomes but local control must be carefully managed",
      "Long-course CRT is obsolete",
      "Neoadjuvant therapy has no role in advanced rectal cancer",
      "All patients should skip TME surgery",
      "A watch-and-wait policy was the main endpoint of RAPIDO"
    ],
    correct: 0,
    explanation: "While TNT reduces metastases and DrTF, local recurrence can be slightly higher. The takeaway is to monitor local control carefully."
  }
];

// ========== Variables for whichever quiz is selected ==========
let currentQuiz = [];
let currentIndex = 0;
let score = 0;
let hasAnswered = false;
let quizTitle = "";

// ========== Start OPRA Quiz ==========
function startOPRA() {
  quizTitle = "OPRA Study Quiz";
  currentQuiz = opraQuestions;
  initQuiz();
}

// ========== Start RAPIDO Quiz ==========
function startRAPIDO() {
  quizTitle = "RAPIDO Study Quiz";
  currentQuiz = rapidoQuestions;
  initQuiz();
}

// ========== Initialize / Render the Chosen Quiz ==========
function initQuiz() {
  // Hide landing page
  document.getElementById('landing-page').style.display = 'none';
  // Show quiz container
  document.getElementById('quiz-container').style.display = 'block';
  // Reset quiz parameters
  currentIndex = 0;
  score = 0;
  hasAnswered = false;
  document.getElementById('quiz-title').innerText = quizTitle;
  renderQuestion();
}

function renderQuestion() {
  const quizContent = document.getElementById('quiz-content');

  if (currentIndex >= currentQuiz.length) {
    quizContent.innerHTML = `
      <div class="score">
        You scored ${score} out of ${currentQuiz.length}!
      </div>
    `;
    return;
  }

  const q = currentQuiz[currentIndex];
  const answersHtml = q.answers.map((ans, idx) => {
    return `<button onclick="checkAnswer(${idx})">${ans}</button>`;
  }).join('');

  quizContent.innerHTML = `
    <div class="question">${q.question}</div>
    <div class="answers">${answersHtml}</div>
    <div id="feedback" class="feedback hidden"></div>
  `;
  hasAnswered = false;
}

function checkAnswer(selectedIndex) {
  if (hasAnswered) return;
  hasAnswered = true;

  const q = currentQuiz[currentIndex];
  const feedbackEl = document.getElementById('feedback');

  if (selectedIndex === q.correct) {
    score++;
    feedbackEl.innerHTML = `<span style="color: green;">Correct!</span>`;
  } else {
    feedbackEl.innerHTML = `<span style="color: red;">Incorrect!</span>`;
  }

  feedbackEl.innerHTML += `
    <div class="explanation">${q.explanation}</div>
    <button class="next-btn" onclick="nextQuestion()">Next Question</button>
  `;
  feedbackEl.classList.remove('hidden');
}

function nextQuestion() {
  currentIndex++;
  renderQuestion();
}
</script>
</body>
</html>
